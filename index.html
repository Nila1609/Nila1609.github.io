<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Nila Mahler â€” Startseite</title>

  <!-- Leaflet CSS (CDN) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

  <style>
    :root{
      --bg:#f7f8fa;
      --card:#ffffff;
      --text:#0b0b0c;
      --muted:#4a4f55;
      --accent:#0b5fff;
      --shadow: 0 6px 18px rgba(11,11,12,0.06);
      --radius:10px;
      --max-width:980px;
    }
    html,body{height:100%}
    body{
      margin:0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      line-height:1.45;
      padding:32px 20px;
      display:flex;
      justify-content:center;
      transition: background-color 240ms ease, color 240ms ease;
    }

    /* Transition fÃ¼r Karten/Kartenboxen und Kartenkacheln */
    .site, section, .intro, .card, .map {
      transition: background-color 240ms ease, box-shadow 240ms ease, color 240ms ease;
    }

    .site{
      width:100%;
      max-width:var(--max-width);
    }

    header{
      display:flex;
      gap:16px;
      align-items:center;
      margin-bottom:24px;
    }

    .brand{
      display:flex;
      gap:12px;
      align-items:center;
    }

    /* Theme toggle button */
    .theme-toggle{
      margin-left:auto;
      background:var(--card);
      color:var(--text);
      border:0;
      padding:8px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      border-radius:10px;
      box-shadow:var(--shadow);
      cursor:pointer;
      font-size:0.95rem;
      transition: transform .12s ease, box-shadow .12s ease, background-color .12s ease, color .12s ease;
    }
    .theme-toggle:focus{outline:3px solid rgba(11,95,255,0.18); outline-offset:3px}
    .theme-toggle:active{transform:translateY(1px)}
    .theme-toggle .label{display:none} /* visuell ausblenden - Icon reicht meist; anpassen falls Text gewÃ¼nscht */

    /* Dark / Night theme overrides */
    body[data-theme="dark"]{
      --bg: #0b0d10;
      --card: #0f1418;
      --text: #e6eef8;
      --muted: #9fb0c6;
      --accent: #4ea0ff;
      --shadow: 0 10px 30px rgba(0,0,0,0.6);
    }

    html,body{height:100%}
    body{
      margin:0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      line-height:1.45;
      padding:32px 20px;
      display:flex;
      justify-content:center;
    }

    .site{
      width:100%;
      max-width:var(--max-width);
    }

    header{
      display:flex;
      gap:16px;
      align-items:center;
      margin-bottom:24px;
    }

    .brand{
      display:flex;
      gap:12px;
      align-items:center;
    }

    .brand figure{
      margin:0;
      width:64px;
      height:64px;
      overflow:hidden;
      border-radius:12px;
      box-shadow:var(--shadow);
      flex:0 0 64px;
    }

    .brand img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    h1{
      font-size:1.25rem;
      margin:0;
      letter-spacing: -0.01em;
    }

    header p{
      margin:0;
      color:var(--muted);
      font-size:0.95rem;
    }

    main{
      display:grid;
      gap:20px;
    }

    .intro{
      background:var(--card);
      padding:18px;
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      display:flex;
      gap:16px;
      align-items:flex-start;
      flex-wrap:wrap;
    }

    .intro figure{
      margin:0;
      width:140px;
      border-radius:10px;
      overflow:hidden;
      flex:0 0 140px;
    }

    .intro img{width:100%;height:100%;object-fit:cover;display:block}

    .intro .text{min-width:0}
    .intro h2{margin:0 0 6px 0;font-size:1rem}
    .intro p{margin:0 0 8px 0;color:var(--muted)}

    section{
      background:var(--card);
      padding:16px;
      border-radius:var(--radius);
      box-shadow:var(--shadow);
    }

    /* Table */
    .table-wrap{
      overflow:auto;
    }
    table{
      width:100%;
      border-collapse:collapse;
      font-size:0.95rem;
      min-width:640px;
    }
    thead th{
      text-align:left;
      font-weight:600;
      padding:10px 12px;
      border-bottom:2px solid rgba(11,11,12,0.06);
    }
    tbody td{
      padding:10px 12px;
      border-bottom:1px solid rgba(11,11,12,0.04);
      color:var(--muted);
    }
    tbody tr:last-child td{border-bottom:0}

    /* Gallery */
    .gallery{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:14px;
      align-items:start;
    }
    .card{
      display:flex;
      flex-direction:column;
      background:linear-gradient(180deg, rgba(255,255,255,0.98), var(--card));
      border-radius:10px;
      overflow:hidden;
      box-shadow:var(--shadow);
      transition:transform .16s ease, box-shadow .16s ease;
      text-decoration:none;
      color:inherit;
    }
    .card:focus, .card:hover{transform:translateY(-6px); box-shadow:0 12px 28px rgba(11,11,12,0.12)}
    .card img{width:100%;height:140px;object-fit:cover;display:block}
    .card .body{padding:12px}
    .card h3{margin:0 0 6px 0;font-size:1rem}
    .card p{margin:0;color:var(--muted);font-size:0.93rem}

    /* Maps */
    .maps-grid{
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:14px;
    }
    .map{
      height:260px;
      border-radius:10px;
      overflow:hidden;
      box-shadow:var(--shadow);
      background:#eaeef2;
    }
    .map + figcaption{margin-top:8px;color:var(--muted);font-size:0.9rem}

    /* Tabs */
    .tabs{
      display:inline-flex;
      gap:8px;
      margin-bottom:18px;
    }
    .tab{
      background:var(--card);
      color:var(--text);
      border:0;
      padding:8px 12px;
      border-radius:10px;
      box-shadow:var(--shadow);
      cursor:pointer;
      font-weight:600;
    }
    .tab[aria-selected="true"]{
      background:linear-gradient(180deg,var(--accent), color-mix(in srgb, var(--accent) 65%, transparent));
      color:white;
      box-shadow:0 10px 30px rgba(11,95,255,0.12);
    }
    .tab:focus{outline:3px solid rgba(11,95,255,0.18); outline-offset:3px}

    .tab-panel{display:none}
    .tab-panel.active{display:block}

    @media (max-width:900px){
      .gallery{grid-template-columns:repeat(2,1fr)}
      .intro{flex-direction:column;align-items:center;text-align:center}
      .intro figure{flex:0 0 180px; width:180px;height:180px}
      .maps-grid{grid-template-columns:1fr}
      .tabs{width:100%; justify-content:space-between}
    }
    @media (max-width:560px){
      .gallery{grid-template-columns:1fr}
      header{flex-direction:column;align-items:flex-start}
      .brand figure{width:56px;height:56px;flex:0 0 56px}
      .intro figure{width:120px;height:120px}
      body{padding:20px 14px}
    }

    /* Accessibility: focus outlines */
    a:focus{outline:3px solid rgba(11,95,255,0.18); outline-offset:3px; border-radius:6px}
  </style>
</head>
<body>
  <div class="site">
    <header>
      <div class="brand">
        <figure aria-hidden="true">
          <img src="assets/me.jpg" alt="Profilfoto">
        </figure>
        <div>
          <h1>Nila Mahler</h1>
          <p>Geoinformatik & Vermessung Â· Datenvisualisierung Â· Kartographie</p>
        </div>
      </div>

      <!-- Theme toggle button (neu) -->
      <button id="theme-toggle" class="theme-toggle" aria-pressed="false" aria-label="Wechseln zwischen hellem und dunklem Modus" title="Hell / Nacht">
        <span class="icon" aria-hidden="true">ðŸŒž</span>
        <span class="label">Modus</span>
      </button>
    </header>

    <!-- Tab controls -->
    <div class="tabs" role="tablist" aria-label="Hauptnavigation">
      <button class="tab" role="tab" data-panel="about" aria-selected="true">About</button>
      <button class="tab" role="tab" data-panel="news" aria-selected="false">News</button>
      <button class="tab" role="tab" data-panel="projects" aria-selected="false">Projects</button>
    </div>

    <!-- Tab panels: About (Intro + Stationen), News (Kurzprojekte/Links), Projects (Karten) -->
    <div id="tab-panels">
      <section id="about" class="tab-panel active" aria-labelledby="intro-title">
        <!-- About: Intro + Stationen (reused content) -->
        <figure>
          <img src="assets/me.jpg" alt="Portraitfoto">
        </figure>
        <div class="text">
          <h2 id="intro-title">Kurz Ã¼ber mich</h2>
          <p>Seit Oktober 2023 studiere ich Geoinformatik und Vermessung an der Hochschule Mainz. Aktuell bin ich im 5. Semester und arbeite gern an rÃ¤umlichen Daten, Karten und interaktiven Visualisierungen.</p>
          <p>Von 2020 bis 2023 habe ich eine Ausbildung zur Vermessungstechnikerin bei TPI Vermessung absolviert. Dabei konnte ich umfangreiche Erfahrungen auf internationalen FlughÃ¤fen und groÃŸen Baustellen sammeln.</p>
        </div>

        <h2 id="stations-title" style="margin:24px 0 12px 0;font-size:1rem">Stationen</h2>
        <div class="table-wrap">
          <table role="table" aria-label="Stationen">
            <caption style="caption-side:top;text-align:left;padding-bottom:8px;color:var(--muted);font-size:0.9rem">AusgewÃ¤hlte Stationen</caption>
            <thead>
              <tr>
                <th scope="col">Jahr</th>
                <th scope="col">Station</th>
                <th scope="col">Ort</th>
                <th scope="col">Stichwort</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>2023â€“heute</td><td>Studium Geoinformatik & Vermessung</td><td>Hochschule Mainz</td><td>5. Semester</td></tr>
              <tr><td>2020â€“2023</td><td>Ausbildung Vermessungstechnikerin</td><td>TPI Vermessung</td><td>FlughÃ¤fen & GroÃŸbaustellen</td></tr>
              <tr><td>2024</td><td>Werkstudent</td><td>GeoSolutions GmbH</td><td>Frontend & Karten</td></tr>
              <tr><td>2022</td><td>Forschungsassistenz</td><td>Institut fÃ¼r Geoinfo</td><td>Modellierung</td></tr>
              <tr><td>2021</td><td>Projektarbeit</td><td>Remote</td><td>Webmapping</td></tr>
              <tr><td>2020</td><td>Schulabschluss</td><td>Hochschule Beispiel</td><td>Grundlagen Geodaten</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <section id="news" class="tab-panel" aria-labelledby="gallery-title">
        <!-- News: Kurzprojekte / Links (reused gallery content) -->
        <h2 id="gallery-title" style="margin:0 0 12px 0;font-size:1rem">Kurzprojekte / Links</h2>
        <div class="gallery">
          <a class="card" href="https://example.com/projekt-karte" target="_blank" rel="noopener noreferrer">
            <img src="assets/me.jpg" alt="Projekt 1 Bild">
            <div class="body">
              <h3>Interaktive Karte</h3>
              <p>Kartenvisualisierung mit Fokus auf Nutzbarkeit und Performance.</p>
            </div>
          </a>

          <a class="card" href="https://github.com/" target="_blank" rel="noopener noreferrer">
            <img src="assets/me.jpg" alt="Projekt 2 Bild">
            <div class="body">
              <h3>Code-Repository</h3>
              <p>Sammlung von Skripten und Tools zur Verarbeitung von Geodaten.</p>
            </div>
          </a>

          <a class="card" href="https://example.org/report" target="_blank" rel="noopener noreferrer">
            <img src="assets/me.jpg" alt="Projekt 3 Bild">
            <div class="body">
              <h3>Bericht & Analyse</h3>
              <p>Dokumentation eines Projekts zu Datenaufbereitung und Visualisierung.</p>
            </div>
          </a>
        </div>
      </section>

      <section id="projects" class="tab-panel" aria-labelledby="maps-title">
        <!-- Projects: Karten (reused maps section) -->
        <h2 id="maps-title" style="margin:0 0 12px 0;font-size:1rem">Karten: Langen Â· Dreieich Â· Wetzlar Â· Mainz</h2>

        <div class="maps-grid" role="list">
          <figure role="listitem">
            <div id="map-langen" class="map" aria-label="Karte Langen"></div>
            <figcaption>Langen (Hessen)</figcaption>
          </figure>

          <figure role="listitem">
            <div id="map-dreieich" class="map" aria-label="Karte Dreieich"></div>
            <figcaption>Dreieich</figcaption>
          </figure>

          <figure role="listitem">
            <div id="map-wetzlar" class="map" aria-label="Karte Wetzlar"></div>
            <figcaption>Wetzlar</figcaption>
          </figure>

          <figure role="listitem">
            <div id="map-mainz" class="map" aria-label="Karte Mainz"></div>
            <figcaption>Mainz</figcaption>
          </figure>
        </div>
      </section>
    </div>
  </div>

  <!-- Leaflet JS (CDN) -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script>
    // Expose Leaflet map initialization as a function so it can be run when Projects tab is opened
    function initMaps(){
      const fixed = {
        'map-langen': { name: 'Langen (Hessen)', coords: [49.9911, 8.6626], zoom: 13 }
      };

      const toGeocode = [
        { id: 'map-dreieich', address: 'Otto-Hahn-StraÃŸe 46, Dreieich, Germany', fallback: [50.0595, 8.7220], zoom: 17, name: 'Dreieich â€” Ottoâ€‘Hahnâ€‘StraÃŸe 46' },
        { id: 'map-wetzlar',  address: 'Werner-von-Siemens-Schule, Wetzlar, Germany', fallback: [50.5565, 8.5010], zoom: 16, name: 'Wetzlar â€” Wernerâ€‘vonâ€‘Siemensâ€‘Schule' },
        { id: 'map-mainz',    address: 'Lucy-Hillebrand-StraÃŸe 2, Mainz, Germany', fallback: [49.9929, 8.2473], zoom: 15, name: 'Mainz â€” Hochschule (Lucyâ€‘Hillebrandâ€‘StraÃŸe 2)' }
      ];

      const tileUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
      const attribution = '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors';

      window._leafletMaps = window._leafletMaps || {};

      function createMap(id, center, zoom, popupText){
        const el = document.getElementById(id);
        if(!el){ console.warn('Leaflet: Kein Element mit id', id); return; }
        // if already created, setView and update marker
        if(window._leafletMaps[id]){
          try{ window._leafletMaps[id].setView(center, zoom); }catch(e){}
          return;
        }
        const map = L.map(id, { attributionControl: false }).setView(center, zoom || 13);
        L.tileLayer(tileUrl, { attribution }).addTo(map);
        L.marker(center).addTo(map).bindPopup(popupText || '').openPopup();
        L.control.attribution({ prefix: false }).addAttribution(attribution).addTo(map);
        window._leafletMaps[id] = map;
      }

      Object.keys(fixed).forEach(id => {
        const cfg = fixed[id];
        createMap(id, cfg.coords, cfg.zoom, cfg.name);
      });

      toGeocode.forEach(item => {
        const url = 'https://nominatim.openstreetmap.org/search?format=json&limit=1&q=' + encodeURIComponent(item.address);
        fetch(url, { headers: { 'Accept': 'application/json' } })
          .then(res => res.json())
          .then(data => {
            if(Array.isArray(data) && data.length > 0){
              const lat = parseFloat(data[0].lat);
              const lon = parseFloat(data[0].lon);
              createMap(item.id, [lat, lon], item.zoom, item.name);
            } else {
              console.warn('Nominatim: kein Treffer fÃ¼r', item.address, '- benutze Fallback-Koordinaten');
              createMap(item.id, item.fallback, item.zoom, item.name + ' (Fallback)');
            }
          })
          .catch(err => {
            console.error('Geokodierung fehlgeschlagen fÃ¼r', item.address, err);
            createMap(item.id, item.fallback, item.zoom, item.name + ' (Fallback)');
          });
      });
    }

    // provide globally
    window.initMaps = initMaps;
  </script>

  <!-- Theme toggle script (neu) -->
  <script>
    (function(){
      const KEY = 'site-theme';
      const btn = document.getElementById('theme-toggle');
      const icon = btn && btn.querySelector('.icon');

      function getPreferred() {
        const stored = localStorage.getItem(KEY);
        if (stored === 'dark' || stored === 'light') return stored;
        // use OS preference if not set
        return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
      }

      function applyTheme(theme) {
        document.body.setAttribute('data-theme', theme === 'dark' ? 'dark' : 'light');
        if (btn) {
          btn.setAttribute('aria-pressed', theme === 'dark' ? 'true' : 'false');
          if (icon) icon.textContent = theme === 'dark' ? 'ðŸŒ™' : 'ðŸŒž';
        }
      }

      function toggleTheme() {
        const current = document.body.getAttribute('data-theme') === 'dark' ? 'dark' : 'light';
        const next = current === 'dark' ? 'light' : 'dark';
        localStorage.setItem(KEY, next);
        applyTheme(next);
      }

      // init
      const initial = getPreferred();
      applyTheme(initial);

      if (btn) {
        btn.addEventListener('click', toggleTheme);
      }
    })();
  </script>
  <script>
    // Tab switching behavior + lazy map init
    (function(){
      const tabs = Array.from(document.querySelectorAll('.tab'));
      const panels = Array.from(document.querySelectorAll('.tab-panel'));
      let mapsInitialized = false;

      function showPanel(name){
        panels.forEach(p => p.classList.toggle('active', p.id === name));
        tabs.forEach(t => t.setAttribute('aria-selected', t.dataset.panel === name ? 'true' : 'false'));

        if(name === 'projects'){
          if(window.initMaps && !mapsInitialized){
            try{ window.initMaps(); }catch(e){ console.error(e); }
            mapsInitialized = true;
          }
          // small timeout to ensure maps are visible, then invalidate sizes
          setTimeout(()=>{
            if(window._leafletMaps){
              Object.values(window._leafletMaps).forEach(m => { try{ m.invalidateSize(); }catch(e){} });
            }
          }, 250);
        }
      }

      tabs.forEach(t => {
        t.addEventListener('click', ()=> showPanel(t.dataset.panel));
        t.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); t.click(); } });
      });

      // default (About)
      showPanel('about');
    })();
  </script>
</body>
</html>