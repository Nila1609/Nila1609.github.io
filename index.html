<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Nila Mahler — Startseite</title>

  <!-- Leaflet CSS (CDN) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

  <style>
    :root{
      --bg:#f7f8fa;
      --card:#ffffff;
      --text:#0b0b0c;
      --muted:#4a4f55;
      --accent:#0b5fff;
      --shadow: 0 6px 18px rgba(11,11,12,0.06);
      --radius:10px;
      --max-width:980px;
    }
    html,body{height:100%}
    body{
      margin:0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      line-height:1.45;
      padding:32px 20px;
      display:flex;
      justify-content:center;
      transition: background-color 240ms ease, color 240ms ease;
    }

    /* Transition für Karten/Kartenboxen und Kartenkacheln */
    .site, section, .intro, .card, .map {
      transition: background-color 240ms ease, box-shadow 240ms ease, color 240ms ease;
    }

    .site{
      width:100%;
      max-width:var(--max-width);
    }

    header{
      display:flex;
      gap:16px;
      align-items:center;
      margin-bottom:24px;
    }

    .brand{
      display:flex;
      gap:12px;
      align-items:center;
    }

    /* Theme toggle button */
    .theme-toggle{
      margin-left:auto;
      background:var(--card);
      color:var(--text);
      border:0;
      padding:8px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      border-radius:10px;
      box-shadow:var(--shadow);
      cursor:pointer;
      font-size:0.95rem;
      transition: transform .12s ease, box-shadow .12s ease, background-color .12s ease, color .12s ease;
    }
    .theme-toggle:focus{outline:3px solid rgba(11,95,255,0.18); outline-offset:3px}
    .theme-toggle:active{transform:translateY(1px)}
    .theme-toggle .label{display:none} /* visuell ausblenden - Icon reicht meist; anpassen falls Text gewünscht */

    /* Dark / Night theme overrides */
    body[data-theme="dark"]{
      --bg: #0b0d10;
      --card: #0f1418;
      --text: #e6eef8;
      --muted: #9fb0c6;
      --accent: #4ea0ff;
      --shadow: 0 10px 30px rgba(0,0,0,0.6);
    }

    html,body{height:100%}
    body{
      margin:0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      line-height:1.45;
      padding:32px 20px;
      display:flex;
      justify-content:center;
    }

    .site{
      width:100%;
      max-width:var(--max-width);
    }

    header{
      display:flex;
      gap:16px;
      align-items:center;
      margin-bottom:24px;
    }

    .brand{
      display:flex;
      gap:12px;
      align-items:center;
    }

    .brand figure{
      margin:0;
      width:64px;
      height:64px;
      overflow:hidden;
      border-radius:12px;
      box-shadow:var(--shadow);
      flex:0 0 64px;
    }

    .brand img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    h1{
      font-size:1.25rem;
      margin:0;
      letter-spacing: -0.01em;
    }

    header p{
      margin:0;
      color:var(--muted);
      font-size:0.95rem;
    }

    main{
      display:grid;
      gap:20px;
    }

    .intro{
      background:var(--card);
      padding:18px;
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      display:flex;
      gap:16px;
      align-items:flex-start;
      flex-wrap:wrap;
    }

    .intro figure{
      margin:0;
      width:140px;
      border-radius:10px;
      overflow:hidden;
      flex:0 0 140px;
    }

    .intro img{width:100%;height:100%;object-fit:cover;display:block}

    .intro .text{min-width:0}
    .intro h2{margin:0 0 6px 0;font-size:1rem}
    .intro p{margin:0 0 8px 0;color:var(--muted)}

    section{
      background:var(--card);
      padding:16px;
      border-radius:var(--radius);
      box-shadow:var(--shadow);
    }

    /* Table */
    .table-wrap{
      overflow:auto;
    }
    table{
      width:100%;
      border-collapse:collapse;
      font-size:0.95rem;
      min-width:640px;
    }
    thead th{
      text-align:left;
      font-weight:600;
      padding:10px 12px;
      border-bottom:2px solid rgba(11,11,12,0.06);
    }
    tbody td{
      padding:10px 12px;
      border-bottom:1px solid rgba(11,11,12,0.04);
      color:var(--muted);
    }
    tbody tr:last-child td{border-bottom:0}

    /* Gallery */
    .gallery{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:14px;
      align-items:start;
    }
    .card{
      display:flex;
      flex-direction:column;
      background:linear-gradient(180deg, rgba(255,255,255,0.98), var(--card));
      border-radius:10px;
      overflow:hidden;
      box-shadow:var(--shadow);
      transition:transform .16s ease, box-shadow .16s ease;
      text-decoration:none;
      color:inherit;
    }
    .card:focus, .card:hover{transform:translateY(-6px); box-shadow:0 12px 28px rgba(11,11,12,0.12)}
    .card img{width:100%;height:140px;object-fit:cover;display:block}
    .card .body{padding:12px}
    .card h3{margin:0 0 6px 0;font-size:1rem}
    .card p{margin:0;color:var(--muted);font-size:0.93rem}

    /* Maps */
    .maps-grid{
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:14px;
    }
    .map{
      height:260px;
      border-radius:10px;
      overflow:hidden;
      box-shadow:var(--shadow);
      background:#eaeef2;
    }
    .map + figcaption{margin-top:8px;color:var(--muted);font-size:0.9rem}

    /* Viewer for external map HTML files placed in /maps */
    .maps-folder { padding:12px; }
    .maps-folder .maps-iframe {
      width:100%;
      height:560px;
      border:0;
      border-radius:10px;
      box-shadow:var(--shadow);
      background: #fff;
    }
    .maps-folder .maps-list { margin:10px 0 12px 0; display:flex; gap:8px; flex-wrap:wrap; align-items:center }
    .maps-folder .maps-list a { background:var(--card); padding:8px 10px; border-radius:8px; box-shadow:var(--shadow); text-decoration:none; color:var(--text); font-weight:600 }

    /* Tabs */
    .tabs{
      display:inline-flex;
      gap:8px;
      margin-bottom:18px;
    }
    /* Hero area (Name + Tabs) */
    .hero{
      background:#c9e6ff; /* hellblau, etwas dunkler für besseren Kontrast */
      padding:14px 16px;
      border-radius:14px;
      box-shadow: 0 8px 22px rgba(11,11,12,0.04);
      margin-bottom:18px;
    }
    /* Slightly tighter header spacing when inside hero */
    .hero header{margin-bottom:0}
    .tab{
      background:var(--card);
      color:var(--text);
      border:0;
      padding:8px 12px;
      border-radius:10px;
      box-shadow:var(--shadow);
      cursor:pointer;
      font-weight:600;
    }
    .tab[aria-selected="true"]{
      background:linear-gradient(180deg,var(--accent), color-mix(in srgb, var(--accent) 65%, transparent));
      color:white;
      box-shadow:0 10px 30px rgba(11,95,255,0.12);
    }
    .tab:focus{outline:3px solid rgba(11,95,255,0.18); outline-offset:3px}

    .tab-panel{display:none}
    .tab-panel.active{display:block}

    /* News card specific */
    .news-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:14px}
    .news-card{display:flex;gap:12px;background:linear-gradient(180deg, rgba(255,255,255,0.98), var(--card));padding:12px;border-radius:10px;box-shadow:var(--shadow);text-decoration:none;color:inherit}
    .news-card img{width:120px;height:80px;object-fit:cover;border-radius:8px;flex:0 0 120px}
    .news-card .meta{font-size:0.85rem;color:var(--muted);margin-bottom:6px}
    @media (max-width:900px){.news-grid{grid-template-columns:1fr}.news-card img{width:100px;height:70px}}

    @media (max-width:900px){
      .gallery{grid-template-columns:repeat(2,1fr)}
      .intro{flex-direction:column;align-items:center;text-align:center}
      .intro figure{flex:0 0 180px; width:180px;height:180px}
      .maps-grid{grid-template-columns:1fr}
      .tabs{width:100%; justify-content:space-between}
    }
    @media (max-width:560px){
      .gallery{grid-template-columns:1fr}
      header{flex-direction:column;align-items:flex-start}
      .brand figure{width:56px;height:56px;flex:0 0 56px}
      .intro figure{width:120px;height:120px}
      body{padding:20px 14px}
    }

    /* Accessibility: focus outlines */
    a:focus{outline:3px solid rgba(11,95,255,0.18); outline-offset:3px; border-radius:6px}

    /* Floating contact links (bottom-right) */
    .contact-fixed{position:fixed;right:18px;bottom:18px;display:flex;flex-direction:column;gap:10px;z-index:1200}
    .contact-btn{width:48px;height:48px;border-radius:12px;display:inline-flex;align-items:center;justify-content:center;background:var(--card);color:var(--text);text-decoration:none;box-shadow:var(--shadow);font-weight:700;font-size:0.85rem;transition:transform .12s ease,box-shadow .12s ease}
    .contact-btn:focus{outline:3px solid rgba(11,95,255,0.18);outline-offset:3px}
    .contact-btn:hover{transform:translateY(-4px);box-shadow:0 14px 32px rgba(11,11,12,0.12)}
    /* Alex2 green variant */
    .contact-btn--alex2{background:#16a34a;color:#fff}
    .contact-btn--alex2:focus{outline:3px solid rgba(22,163,74,0.28)}
    .contact-btn--alex2:hover{transform:translateY(-4px);box-shadow:0 14px 32px rgba(16,97,48,0.18)}
    @media (max-width:560px){.contact-fixed{right:12px;bottom:12px;gap:8px}.contact-btn{width:44px;height:44px;font-size:0.8rem}}
  </style>
</head>
<body>
  <div class="site">
    <div class="hero">
      <header>
       <div class="brand">
         <figure aria-hidden="true">
           <img src="assets/me.jpg" alt="Profilfoto">
         </figure>
         <div>
           <h1>Nila Mahler</h1>
           <p>Geoinformatik & Vermessung · Datenvisualisierung · Kartographie</p>
         </div>
       </div>

       <!-- Theme toggle button (neu) -->
       <button id="theme-toggle" class="theme-toggle" aria-pressed="false" aria-label="Wechseln zwischen hellem und dunklem Modus" title="Hell / Nacht">
         <span class="icon" aria-hidden="true">🌞</span>
         <span class="label">Modus</span>
       </button>
      </header>

      <!-- Tab controls -->
      <div class="tabs" role="tablist" aria-label="Hauptnavigation">
       <button class="tab" role="tab" data-panel="about" aria-selected="true">About</button>
       <button class="tab" role="tab" data-panel="news" aria-selected="false">News</button>
       <button class="tab" role="tab" data-panel="projects" aria-selected="false">Projects</button>
       <button class="tab" role="tab" data-panel="maps-folder" aria-selected="false">Maps</button>
      </div>
    </div>

    <!-- Tab panels: About (Intro + Stationen), News (Kurzprojekte/Links), Projects (Karten) -->
    <div id="tab-panels">
      <section id="about" class="tab-panel active" aria-labelledby="intro-title">
        <!-- About: Intro + Stationen (reused content) -->
        <figure>
          <img src="assets/me.jpg" alt="Portraitfoto">
        </figure>
        <div class="text">
          <h2 id="intro-title">Kurz über mich</h2>
          <p>Seit Oktober 2023 studiere ich Geoinformatik und Vermessung an der Hochschule Mainz. Aktuell bin ich im 5. Semester und arbeite gern an räumlichen Daten, Karten und interaktiven Visualisierungen.</p>
          <p>Von 2020 bis 2023 habe ich eine Ausbildung zur Vermessungstechnikerin bei TPI Vermessung absolviert. Dabei konnte ich umfangreiche Erfahrungen auf internationalen Flughäfen und großen Baustellen sammeln.</p>
        </div>

        <h2 id="stations-title" style="margin:24px 0 12px 0;font-size:1rem">Stationen</h2>
        <div class="table-wrap">
          <table role="table" aria-label="Stationen">
            <caption style="caption-side:top;text-align:left;padding-bottom:8px;color:var(--muted);font-size:0.9rem">Ausgewählte Stationen</caption>
            <thead>
              <tr>
                <th scope="col">Jahr</th>
                <th scope="col">Station</th>
                <th scope="col">Ort</th>
                <th scope="col">Stichwort</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>2023–heute</td><td>Studium Geoinformatik & Vermessung</td><td>Hochschule Mainz</td><td>5. Semester</td></tr>
              <tr><td>2020–2023</td><td>Ausbildung Vermessungstechnikerin</td><td>TPI Vermessung</td><td>Flughäfen & Großbaustellen</td></tr>
              <tr><td>2024</td><td>Werkstudent</td><td>GeoSolutions GmbH</td><td>Frontend & Karten</td></tr>
              <tr><td>2022</td><td>Forschungsassistenz</td><td>Institut für Geoinfo</td><td>Modellierung</td></tr>
              <tr><td>2021</td><td>Projektarbeit</td><td>Remote</td><td>Webmapping</td></tr>
              <tr><td>2020</td><td>Schulabschluss</td><td>Hochschule Beispiel</td><td>Grundlagen Geodaten</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <section id="news" class="tab-panel" aria-labelledby="gallery-title">
        <!-- News: Kurzprojekte / Links (reused gallery content) -->
        <h2 id="gallery-title" style="margin:0 0 12px 0;font-size:1rem">Kurzprojekte / Links</h2>
        <div class="gallery" id="news-gallery">
          <!-- existing static cards kept as fallback -->
          <a class="card" href="https://example.com/projekt-karte" target="_blank" rel="noopener noreferrer">
            <img src="assets/me.jpg" alt="Projekt 1 Bild">
            <div class="body">
              <h3>Interaktive Karte</h3>
              <p>Kartenvisualisierung mit Fokus auf Nutzbarkeit und Performance.</p>
            </div>
          </a>

          <a class="card" href="https://github.com/" target="_blank" rel="noopener noreferrer">
            <img src="assets/me.jpg" alt="Projekt 2 Bild">
            <div class="body">
              <h3>Code-Repository</h3>
              <p>Sammlung von Skripten und Tools zur Verarbeitung von Geodaten.</p>
            </div>
          </a>

          <a class="card" href="https://example.org/report" target="_blank" rel="noopener noreferrer">
            <img src="assets/me.jpg" alt="Projekt 3 Bild">
            <div class="body">
              <h3>Bericht & Analyse</h3>
              <p>Dokumentation eines Projekts zu Datenaufbereitung und Visualisierung.</p>
            </div>
          </a>
        </div>
      </section>

      <section id="projects" class="tab-panel" aria-labelledby="maps-title">
        <!-- Projects: Karten (reused maps section) -->
        <h2 id="maps-title" style="margin:0 0 12px 0;font-size:1rem">Karten: Langen · Dreieich · Wetzlar · Mainz</h2>

        <div class="maps-grid" role="list">
          <figure role="listitem">
            <div id="map-langen" class="map" aria-label="Karte Langen"></div>
            <figcaption>Langen (Hessen)</figcaption>
          </figure>

          <figure role="listitem">
            <div id="map-dreieich" class="map" aria-label="Karte Dreieich"></div>
            <figcaption>Dreieich - TPI Vermessung</figcaption>
          </figure>

          <figure role="listitem">
            <div id="map-wetzlar" class="map" aria-label="Karte Wetzlar"></div>
            <figcaption>Wetzlar, Werner-von-Siemens-Schule - Berufsschule</figcaption>
          </figure>

          <figure role="listitem">
            <div id="map-mainz" class="map" aria-label="Karte Mainz"></div>
            <figcaption>Mainz - HS Mainz</figcaption>
          </figure>
        </div>
      </section>

      <!-- Neue Section: Maps-Ordner Viewer -->
      <section id="maps-folder" class="tab-panel" aria-labelledby="maps-folder-title">
        <h2 id="maps-folder-title" style="margin:0 0 12px 0;font-size:1rem">Maps</h2>
        <div class="maps-folder">
          <div id="maps-list" class="maps-list">Suche nach Karten im Ordner <code>maps/</code> …</div>
          <iframe id="maps-iframe" class="maps-iframe" title="Maps Viewer" src="" aria-hidden="true" style="display:none"></iframe>
        </div>
      </section>
    </div>
  </div>

  <!-- Leaflet JS (CDN) -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script>
    // Expose Leaflet map initialization as a function so it can be run when Projects tab is opened
    function initMaps(){
      const fixed = {
        'map-langen': { name: 'Langen (Hessen)', coords: [49.9911, 8.6626], zoom: 13 }
      };

      const toGeocode = [
        { id: 'map-dreieich', address: 'Otto-Hahn-Straße 46, Dreieich, Germany', fallback: [50.0595, 8.7220], zoom: 17, name: 'Dreieich — Otto‑Hahn‑Straße 46' },
        { id: 'map-wetzlar',  address: 'Werner-von-Siemens-Schule, Wetzlar, Germany', fallback: [50.5565, 8.5010], zoom: 16, name: 'Wetzlar — Werner‑von‑Siemens‑Schule' },
        { id: 'map-mainz',    address: 'Lucy-Hillebrand-Straße 2, Mainz, Germany', fallback: [49.9929, 8.2473], zoom: 15, name: 'Mainz — Hochschule (Lucy‑Hillebrand‑Straße 2)' }
      ];

      const tileUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
      const attribution = '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors';

      window._leafletMaps = window._leafletMaps || {};

      function createMap(id, center, zoom, popupText){
        const el = document.getElementById(id);
        if(!el){ console.warn('Leaflet: Kein Element mit id', id); return; }
        // if already created, setView and update marker
        if(window._leafletMaps[id]){
          try{ window._leafletMaps[id].setView(center, zoom); }catch(e){}
          return;
        }
        const map = L.map(id, { attributionControl: false }).setView(center, zoom || 13);
        L.tileLayer(tileUrl, { attribution }).addTo(map);
        L.marker(center).addTo(map).bindPopup(popupText || '').openPopup();
        L.control.attribution({ prefix: false }).addAttribution(attribution).addTo(map);
        window._leafletMaps[id] = map;
      }

      Object.keys(fixed).forEach(id => {
        const cfg = fixed[id];
        createMap(id, cfg.coords, cfg.zoom, cfg.name);
      });

      toGeocode.forEach(item => {
        const url = 'https://nominatim.openstreetmap.org/search?format=json&limit=1&q=' + encodeURIComponent(item.address);
        fetch(url, { headers: { 'Accept': 'application/json' } })
          .then(res => res.json())
          .then(data => {
            if(Array.isArray(data) && data.length > 0){
              const lat = parseFloat(data[0].lat);
              const lon = parseFloat(data[0].lon);
              createMap(item.id, [lat, lon], item.zoom, item.name);
            } else {
              console.warn('Nominatim: kein Treffer für', item.address, '- benutze Fallback-Koordinaten');
              createMap(item.id, item.fallback, item.zoom, item.name + ' (Fallback)');
            }
          })
          .catch(err => {
            console.error('Geokodierung fehlgeschlagen für', item.address, err);
            createMap(item.id, item.fallback, item.zoom, item.name + ' (Fallback)');
          });
      });
    }

    // provide globally
    window.initMaps = initMaps;
  </script>

  <!-- Theme toggle script (neu) -->
  <script>
    (function(){
      const KEY = 'site-theme';
      const btn = document.getElementById('theme-toggle');
      const icon = btn && btn.querySelector('.icon');

      function getPreferred() {
        const stored = localStorage.getItem(KEY);
        if (stored === 'dark' || stored === 'light') return stored;
        // use OS preference if not set
        return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
      }

      function applyTheme(theme) {
        document.body.setAttribute('data-theme', theme === 'dark' ? 'dark' : 'light');
        if (btn) {
          btn.setAttribute('aria-pressed', theme === 'dark' ? 'true' : 'false');
          if (icon) icon.textContent = theme === 'dark' ? '🌙' : '🌞';
        }
      }

      function toggleTheme() {
        const current = document.body.getAttribute('data-theme') === 'dark' ? 'dark' : 'light';
        const next = current === 'dark' ? 'light' : 'dark';
        localStorage.setItem(KEY, next);
        applyTheme(next);
      }

      // init
      const initial = getPreferred();
      applyTheme(initial);

      if (btn) {
        btn.addEventListener('click', toggleTheme);
      }
    })();
  </script>
  <script>
    // Tab switching behavior + lazy map init
    (function(){
      const tabs = Array.from(document.querySelectorAll('.tab'));
      const panels = Array.from(document.querySelectorAll('.tab-panel'));
      let mapsInitialized = false;
      let mapsFolderLoaded = false;

      async function loadMapsFromFolder(){
         if(mapsFolderLoaded) return;
         mapsFolderLoaded = true;
         const listEl = document.getElementById('maps-list');
         const iframe = document.getElementById('maps-iframe');
         if(!listEl || !iframe) return;

         const candidates = [
           'maps/index.html',
           'maps/map.html',
           'maps/main.html',
           'maps/cesium_lod2.html',
           'maps/map_1_basiskarte.html',
           'maps/map_2_punkte.html',
           'maps/map_3_reiseroute.html',
           'maps/map_4_flaechen_online.html'
         ];

         listEl.textContent = '';

         // Try to find the first existing HTML file and also list all that exist
         const found = [];
         for(const url of candidates){
           try{
             const res = await fetch(url, { method: 'GET' });
             if(res.ok){
               found.push(url);
             }
           }catch(e){ /* ignore */ }
         }

         if(found.length === 0){
           listEl.textContent = 'Keine Karten im Ordner "maps" gefunden. Bitte lege eine HTML-Datei in maps/ ab.';
           return;
         }

        // create entries for all found files with a button to load each into the iframe
        found.forEach((url, idx) => {
          const name = url.split('/').pop();
          const item = document.createElement('div');
          item.style.display = 'inline-flex';
          item.style.alignItems = 'center';
          item.style.gap = '8px';

          const a = document.createElement('a');
          a.href = url;
          a.textContent = name;
          a.target = '_blank';
          a.rel = 'noopener noreferrer';
          a.title = 'In neuem Tab öffnen';

          const btn = document.createElement('button');
          btn.type = 'button';
          btn.textContent = 'Anzeigen';
          btn.style.cursor = 'pointer';
          btn.addEventListener('click', () => {
            iframe.src = url;
            iframe.style.display = 'block';
            iframe.setAttribute('aria-hidden','false');
          });

          item.appendChild(a);
          item.appendChild(btn);
          listEl.appendChild(item);

          // load the first found map into the iframe by default
          if(idx === 0){
            iframe.src = url;
            iframe.style.display = 'block';
            iframe.setAttribute('aria-hidden','false');
          }
        });
       }

      function showPanel(name){
        panels.forEach(p => p.classList.toggle('active', p.id === name));
        tabs.forEach(t => t.setAttribute('aria-selected', t.dataset.panel === name ? 'true' : 'false'));

        if(name === 'projects'){
          if(window.initMaps && !mapsInitialized){
            try{ window.initMaps(); }catch(e){ console.error(e); }
            mapsInitialized = true;
          }
          // small timeout to ensure maps are visible, then invalidate sizes
          setTimeout(()=>{
            if(window._leafletMaps){
              Object.values(window._leafletMaps).forEach(m => { try{ m.invalidateSize(); }catch(e){} });
            }
          }, 250);
        } else if(name === 'maps-folder'){
           // try to load HTML maps from /maps on first open
           try{ loadMapsFromFolder(); }catch(e){ console.error(e); }
         }
      }

      tabs.forEach(t => {
        t.addEventListener('click', ()=> showPanel(t.dataset.panel));
        t.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); t.click(); } });
      });

      // default (About)
      showPanel('about');
    })();
  </script>

  <script>
    // Load news from JSON and render into #news-gallery
    (function(){
      const container = document.getElementById('news-gallery');
      if(!container) return;
      fetch('assets/news.json')
        .then(res => {
          if(!res.ok) throw new Error('Fehler beim Laden der News JSON');
          return res.json();
        })
        .then(data => {
          if(!Array.isArray(data) || data.length === 0) return;
          // clear existing static gallery
          container.innerHTML = '';
          const grid = document.createElement('div');
          grid.className = 'news-grid';

          data.forEach(item => {
            const a = document.createElement('a');
            a.className = 'news-card';
            a.href = item.link || '#';
            a.target = '_blank';
            a.rel = 'noopener noreferrer';

            const img = document.createElement('img');
            img.src = item.image || 'assets/me.jpg';
            img.alt = item.title || '';

            const body = document.createElement('div');
            body.style.minWidth = '0';

            const meta = document.createElement('div');
            meta.className = 'meta';
            const date = new Date(item.date);
            meta.textContent = isNaN(date) ? (item.date || '') : date.toLocaleDateString('de-DE', { year: 'numeric', month: 'short', day: 'numeric' });

            const h3 = document.createElement('h3');
            h3.textContent = item.title || 'News';
            h3.style.margin = '0 0 6px 0';
            h3.style.fontSize = '1rem';

            const p = document.createElement('p');
            p.textContent = item.excerpt || '';
            p.style.margin = '0';
            p.style.color = 'var(--muted)';

            body.appendChild(meta);
            body.appendChild(h3);
            body.appendChild(p);

            a.appendChild(img);
            a.appendChild(body);
            grid.appendChild(a);
          });

          container.appendChild(grid);
        })
        .catch(err => {
          console.error('News laden fehlgeschlagen', err);
        });
    })();
  </script>

  <!-- Floating contact links (bottom-right) -->
  <div class="contact-fixed" aria-hidden="false">
    <a class="contact-btn" href="https://tpi-vermessung.de/" target="_blank" rel="noopener noreferrer" aria-label="TPI Vermessung">
      <span>TPI</span>
    </a>

    <a class="contact-btn" href="https://www.hs-mainz.de/studium/studiengaenge/hochschulweite-studiengaenge/angewandte-informatik-bsc/uebersicht/" target="_blank" rel="noopener noreferrer" aria-label="Hochschule Mainz">
      <span>HS</span>
    </a>

    <a class="contact-btn contact-btn--alex2" href="https://alex-2.de/schiffsposition/" target="_blank" rel="noopener noreferrer" aria-label="Schiffsposition Alex-2">
      <span>Alex 2</span>
    </a>
  </div>
</body>
</html>